(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{608:function(n,s,a){"use strict";a.r(s);var t=a(15),i=Object(t.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"检测障碍物"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测障碍物"}},[n._v("#")]),n._v(" 检测障碍物")]),n._v(" "),a("h2",{attrs:{id:"刚体与碰撞器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#刚体与碰撞器"}},[n._v("#")]),n._v(" 刚体与碰撞器")]),n._v(" "),a("p",[n._v("unity中的两个物体要想发生碰撞，必须依赖于自身的碰撞器组件（Collider），并且至少其中一个物体必须附有刚体组件（Rigidbody），其中附带碰撞检测脚本的物体必须有刚体组件(一般刚体放在运动物体上，因为刚体会休眠)。")]),n._v(" "),a("p",[n._v("unity中的碰撞检测，主要有两种接口函数，一种是碰撞信息检测，一种是触发信息检测（在检视面板碰撞器组件中勾选IsTrigger属性选择框，则为触发器模式），这两种接口函数具体为：")]),n._v(" "),a("p",[n._v("碰撞信息检测：")]),n._v(" "),a("p",[n._v("1.MonoBehaviour.OnCollisionEnter(Collision collisionInfo) 只有进入碰撞器时，调用该方法，在两个物体离开碰撞器之前只调用一次")]),n._v(" "),a("p",[n._v("onTriggerEnter2D")]),n._v(" "),a("p",[n._v("2.MonoBehaviour.OnCollisionStay(Collision collisionInfo) 在两物体保持接触时调用，在两个物体碰撞器离开之前每帧调用一次")]),n._v(" "),a("p",[n._v("onTriggerStay2D")]),n._v(" "),a("p",[n._v("3.MonoBehaviour.OnCollisionExit(Collision collisionInfo) 只有两个物体碰撞器离开时，调用该方法一次 触发信息检测：")]),n._v(" "),a("p",[n._v("OnTriggerExit2d")]),n._v(" "),a("blockquote",[a("p",[n._v("如果需要对不同类型物体的碰撞做出对应的操作，可以对不同的物体打上tag，在函数中获取对应的tag switch 不同的操作")])]),n._v(" "),a("p",[n._v("如果不点isTrigger，那么碰撞会有物理效果。比如一方会阻止另一方的移动，碰撞会对移动产生影响。")]),n._v(" "),a("p",[n._v("如果有任意一方点了isTrigger，那么不会有物理效果，双方会互相穿透。")]),n._v(" "),a("p",[n._v("如果碰撞了刚体有3种类型")]),n._v(" "),a("ol",[a("li",[n._v("Dynamic 类型会响应所有物理效果，在碰撞到物体会发生位移，旋转。")]),n._v(" "),a("li",[n._v("Kinematic 不会响应物理效果，不受力的影响，但是可以通过Rigidbody2d.movePosstion来移动它。")]),n._v(" "),a("li",[n._v("Static 表示一个不会动的物体，质量无限大，且不会收到力的作用，也不能通过RIgidbody2d的函数来进行移动或者旋转。")])]),n._v(" "),a("h2",{attrs:{id:"检测周围物体属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#检测周围物体属性"}},[n._v("#")]),n._v(" 检测周围物体属性")]),n._v(" "),a("p",[n._v("上面的稍微麻烦了一点，如果你只是想简单的检测周围的物体。")]),n._v(" "),a("p",[n._v("比如类似pokemon 游戏，用tilemap做了地图，检测是不是在遇怪区域。")]),n._v(" "),a("p",[n._v("可以给这个tilemap设置tilemap colider2d 和 composite colider2d")]),n._v(" "),a("p",[a("img",{attrs:{src:"D:%5CWebProject%5CscyWebBlog%5Cblogs%5CUnity2d%5Csnap%5C2-1.png",alt:"image-20220516210559400"}})]),n._v(" "),a("p",[n._v("另一个物体player不需要设置刚体和 碰撞器")]),n._v(" "),a("p",[n._v("只需要把对应的层传进脚本")]),n._v(" "),a("p",[n._v("然后检测player周围的layer类型就可以了")]),n._v(" "),a("div",{staticClass:"language-c# line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    private bool IsWalkable(Vector3 targetObject)\n    {\n        // 检测目标位置的0.3f范围是否存在不可过去的sloid层\n        //   \t\t\t\t\t\t移动时的目标位置\n        if (Physics2D.OverlapCircle(targetObject, 0.1f, solidObjectLayer) != null)\n        {\n            return false;\n        }\n        return true;\n    }\n\n    private void CheckForEncounters()\n    {\n        // 是否在草丛遇怪区\t\t\t\t角色位置\n        if (Physics2D.OverlapCircle(transform.position, 0.2f, longGrassLayer) != null)\n        {\n            if (UnityEngine.Random.Range(1, 101) <= 10)\n            {\n                onEncountered();\n                animator.SetBool("isMoving", false);\n            }\n        }\n    }\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br")])])])}),[],!1,null,null,null);s.default=i.exports}}]);